# YOLO 学习笔记

[toc]

## 一、B站视频跟学

### 1. 林亿饼

#### YOLO环境配置



#### YOLO推理入门



#### YOLO训练入门



#### YOLO数据集



#### YOLO深入验证

##### 【目标检测中的验证指标】

对于每一类，求：

1. TP（True Positive, 真正例）：匹配成功的预测框（真实框）个数

2. FP（False Positive, 假正例）：匹配失败的预测框个数

3. FN（False Negative, 假负例）：匹配失败的真实框个数

   > TP+FP=预测框总数
   >
   > TP+FN=真实框总数

4. P（Precision, 精确率）：
   $$
   P = \frac{TP}{TP+FP}=\frac{预测正确的数量}{预测总共的数量}
   $$

5. R（Recall, 召回率）：
   $$
   R=\frac{TP}{TP+FN}=\frac{预测正确的数量}{总共正确的数量}
   $$

6. F1 score：
   $$
   F1 = \frac{2 \times P \times R}{P + R}
   $$



##### 【后处理】

1. 置信度筛选【去弱】：去掉所有置信度低于阈值的预测框（默认 conf=0.25）

    随着置信度阈值 conf 的提高，精确率P会上升，召回率R会下降（“误伤一部分瞎猫”）

2. 非极大值抑制（NMS）【去重】：（默认 iou=0.7）

3. 限制预测总数【限量】：若预测框数量仍然超出限量，则去掉置信度低的框（默认 max_det=300）



##### 【可视化】

1. P曲线
2. R曲线
3. F1曲线

都是 与横轴x轴和纵轴x=1包裹的面积 越大越好

每个类别 -> 全部类别的平均

优秀的conf = 让F1达到最大值的conf



1. PR曲线

   纵轴P，横轴R。

   其与x轴和y轴围成的面积为AP（Average Precision, 平均精度）

   P曲线和R曲线的交点的纵坐标越大（即越高），则AP越大（即：能找到一个conf，使得P和R都很高）

2. mAP（mean Average Precision, 平均平均精度）

   所有类别的AP的平均；

   mAP@50：IoU阈值设置为0.5

   mAP@0.5:0.95：IoU阈值从0.5一直到0.95，间隔0.05。基于每个IoU阈值求出的mAP，进行平均；



最后的fitness可以自定义P / R / mAP@50 / mAP@50:95 的加权权重